此项目是研究
orderer-->server/main.go里main函数-->localconfig.Load()-->config viper对象的读取过程

############################################################

启动示例项目，看看orderer服务器FABRIC_CFG_PATH 或者 /etc/hyperledger/fabric上到底有啥

$ cd fabric-samples/first-network/
$ ./byfn.sh up
$ docker ps
CONTAINER ID        IMAGE                                                                                                  COMMAND                  CREATED             STATUS              PORTS                                              NAMES
b8471c18c55f        dev-peer1.org2.example.com-mycc-1.0-26c2ef32838554aac4f7ad6f100aca865e87959c9a126e86d764c8d01f8346ab   "chaincode -peer.add…"   9 minutes ago       Up 9 minutes                                                           dev-peer1.org2.example.com-mycc-1.0
b8304ebc3b3d        dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9   "chaincode -peer.add…"   9 minutes ago       Up 9 minutes                                                           dev-peer0.org1.example.com-mycc-1.0
165f0b06a553        dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b   "chaincode -peer.add…"   9 minutes ago       Up 9 minutes                                                           dev-peer0.org2.example.com-mycc-1.0
61a68bbedafb        hyperledger/fabric-tools:latest                                                                        "/bin/bash"              10 minutes ago      Up 10 minutes                                                          cli
48db0a229902        hyperledger/fabric-orderer:latest                                                                      "orderer"                10 minutes ago      Up 10 minutes       0.0.0.0:7050->7050/tcp                             orderer.example.com
a1e5b199b7df        hyperledger/fabric-peer:latest                                                                         "peer node start"        10 minutes ago      Up 10 minutes       0.0.0.0:8051->7051/tcp, 0.0.0.0:8053->7053/tcp     peer1.org1.example.com
48877da50048        hyperledger/fabric-peer:latest                                                                         "peer node start"        10 minutes ago      Up 10 minutes       0.0.0.0:9051->7051/tcp, 0.0.0.0:9053->7053/tcp     peer0.org2.example.com
80a5919afb2d        hyperledger/fabric-peer:latest                                                                         "peer node start"        10 minutes ago      Up 10 minutes       0.0.0.0:10051->7051/tcp, 0.0.0.0:10053->7053/tcp   peer1.org2.example.com
95cbd3fbd63f        hyperledger/fabric-peer:latest                                                                         "peer node start"        10 minutes ago      Up 10 minutes       0.0.0.0:7051->7051/tcp, 0.0.0.0:7053->7053/tcp     peer0.org1.example.com
$ docker exec -it 48db0a229902 /bin/bash
# echo $FABRIC_CFG_PATH
/etc/hyperledger/fabric

看来在orderer上FABRIC_CFG_PATH和/etc/hyperledger/fabric是一个东西

# cd /etc/hyperledger/fabric
# ls
configtx.yaml  core.yaml  msp  orderer.yaml
# ls msp
admincerts  cacerts  config.yaml  keystore  signcerts  tlscacerts  tlsintermediatecerts
$ docker images
......
hyperledger/fabric-orderer                                                                             1.4.0               54f372205580        9 months ago        150MB
......
$ docker history 54f372205580 --no-trunc=true
IMAGE                                                                     CREATED             CREATED BY                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 SIZE                COMMENT
sha256:54f372205580fca697f9f072f00da38fa5d2d55560003d0e276bcefc99eb64bf   9 months ago        /bin/sh -c #(nop)  LABEL org.hyperledger.fabric.version=1.4.0 org.hyperledger.fabric.base.version=0.4.14                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0B
<missing>                                                                 9 months ago        /bin/sh -c #(nop)  CMD ["orderer"]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         0B
<missing>                                                                 9 months ago        /bin/sh -c #(nop)  EXPOSE 7050                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0B
<missing>                                                                 9 months ago        /bin/sh -c #(nop) ADD file:cae778cfab240841852d06ef497ce106401b5bf82a39ce7e1521cf722d21683c in /etc/hyperledger/fabric/                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    69kB
<missing>                                                                 9 months ago        /bin/sh -c #(nop) COPY file:c80fef7b6fc3eb22464668deb9f54ddb37aa40b0e41eaa477015dedcdd94a913 in /usr/local/bin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             26.2MB
<missing>                                                                 9 months ago        /bin/sh -c mkdir -p /var/hyperledger/production $FABRIC_CFG_PATH                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0B
<missing>                                                                 9 months ago        /bin/sh -c #(nop)  ENV FABRIC_CFG_PATH=/etc/hyperledger/fabric                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0B
<missing>                                                                 12 months ago       /bin/sh -c cd /tmp/scripts &&     common/init.sh &&     docker/init.sh &&     common/cleanup.sh &&     rm -rf /tmp/scripts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 8.67MB
<missing>                                                                 12 months ago       /bin/sh -c #(nop) COPY dir:7a02c249ea4b9fc7dd03352f00e78fade0f76133c3fb2cd79eb2fb80ae116b5c in /tmp/scripts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                10.7kB
<missing>                                                                 13 months ago       /bin/sh -c #(nop)  CMD ["/bin/bash"]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       0B
<missing>                                                                 13 months ago       /bin/sh -c mkdir -p /run/systemd && echo 'docker' > /run/systemd/container                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 7B
<missing>                                                                 13 months ago       /bin/sh -c sed -i 's/^#\s*\(deb.*universe\)$/\1/g' /etc/apt/sources.list                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   2.76kB
<missing>                                                                 13 months ago       /bin/sh -c rm -rf /var/lib/apt/lists/*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0B
<missing>                                                                 13 months ago       /bin/sh -c set -xe   && echo '#!/bin/sh' > /usr/sbin/policy-rc.d  && echo 'exit 101' >> /usr/sbin/policy-rc.d  && chmod +x /usr/sbin/policy-rc.d   && dpkg-divert --local --rename --add /sbin/initctl  && cp -a /usr/sbin/policy-rc.d /sbin/initctl  && sed -i 's/^exit.*/exit 0/' /sbin/initctl   && echo 'force-unsafe-io' > /etc/dpkg/dpkg.cfg.d/docker-apt-speedup   && echo 'DPkg::Post-Invoke { "rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true"; };' > /etc/apt/apt.conf.d/docker-clean  && echo 'APT::Update::Post-Invoke { "rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true"; };' >> /etc/apt/apt.conf.d/docker-clean  && echo 'Dir::Cache::pkgcache ""; Dir::Cache::srcpkgcache "";' >> /etc/apt/apt.conf.d/docker-clean   && echo 'Acquire::Languages "none";' > /etc/apt/apt.conf.d/docker-no-languages   && echo 'Acquire::GzipIndexes "true"; Acquire::CompressionTypes::Order:: "gz";' > /etc/apt/apt.conf.d/docker-gzip-indexes   && echo 'Apt::AutoRemove::SuggestsImportant "false";' > /etc/apt/apt.conf.d/docker-autoremove-suggests   745B
<missing>                                                                 13 months ago       /bin/sh -c #(nop) ADD file:a83ab1826f43e88bc0d3ab6230f14cb9b2dacab70c762c3bfc555eda733b292c in /                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           115MB

可以看到在创建容器之初，这个环境变量就设置好了

目前为止/etc/hyperledger/fabric里面的文件从哪里来的，暂时没找到
直接从容器里面拷一份出来研究
$ sudo docker cp 48db0a229902:/etc/hyperledger/fabric ./tmp_fabric

fmt.Println(config.ConfigFileUsed())
输出的是
/home/yong/Go-Stu20191008001/ReadFabricSourceCode/stu_orderer_load/tmp_fabric/orderer.yaml

$ cd fabric-samples/
$ find . -name orderer.yaml
$ grep . -r --include=*.* -e orderer.yaml
都没找到

$ cd fabric/
$ find . -name orderer.yaml
./examples/cluster/config/orderer.yaml
./sampleconfig/orderer.yaml
$ grep . -r --include=*.* -e orderer.yaml

